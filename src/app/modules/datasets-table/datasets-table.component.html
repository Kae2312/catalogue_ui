<div class="dataset-table datasets-table-component" *ngIf="feeds && feeds.length>0">
    <table id="datatable" class="display responsive nowrap" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th class="chkMulti">
                    <i class="fa fa-check-square-o checkAll" aria-hidden="true" (click)="checkAll()" title="{{'datasets-table.checkall'|translate}}"></i>
                </th>
                <th>
                    <app-sort-link sortValue="name" [(value)]="currentSort" (valueChange)="setSort($event)" defaultOrder="asc">
                        {{'datasets-table.column.feedName'|translate}}
                    </app-sort-link>
                </th>
                <!--
	<th>
          <app-sort-link sortValue="regionStateCountry" [(value)]="currentSort" (valueChange)="setSort($event)"
			 defaultOrder="asc">
            {{'datasets-table.column.area'|translate}}
          </app-sort-link>
	</th>
	-->
                <th>
                    {{'datasets-table.column.license'|translate}}
                </th>
                <th>
                    {{'datasets-table.column.miscData'|translate}}
                </th>
                <!--
	<th>
	  License Details<a href="#" class="question-circle"></a>
	</th>
	-->
                <th *ngIf="sessionService.loggedIn">
                    {{'datasets-table.column.subscribe'|translate}}
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let feed of feeds | paginate: { itemsPerPage: config.PAGINATION_ITEMS_PER_PAGE, maxSize: config.PAGINATION_LINKS_MAX, currentPage: page }">
                <td class="chkMulti">
                    <div><input type="checkbox" [(ngModel)]="checkById[feed.id]"></div>
                </td>
                <td>
                    <a [routerLink]="['/feeds/', feed.id]">
                        {{feed.name}}</a>
                    <div class="form-group" *ngIf="feed.feedVersionCount > 0">
                        <select class="form-control" [ngModel]="feed.selectedVersion">
                  				<option [ngValue]="version" *ngFor="let version of feed.allVersions">{{version.updated | date:'y-MM-dd'}}</option>
                  			</select>
                    </div>
                </td>
                <!--
	<td class="area">
          <div>{{regionStateCountry(feed)}}</div>
	</td>
	-->
                <td>
                    <a *ngIf="feedsLicenses[feed.id]" download="{{feedsLicenses[feed.id].name}}" href="{{feedsLicenses[feed.id].licenseUrl}}" tooltip="{{'datasets.table.tooltips.download' | translate}}">
                        <span>
                            {{feedsLicenses[feed.id].name}}
                        </span>
                    </a>
                </td>

                <td>
                    <a *ngIf="feedsMiscDatas[feed.id]" download="{{feedsMiscDatas[feed.id].name}}" href="{{feedsMiscDatas[feed.id].miscDataUrl}}" tooltip="{{'datasets.table.tooltips.download' | translate}}">
                        <span>
                            {{feedsMiscDatas[feed.id].name}}
                        </span>
                    </a>
                </td>
                <!--
	<td>
          <div class="license-attr">
	    <span class="unknown-attr requires disabled">
	      <span class="tool-tip-info">Unknown whether agency requires attribution.</span>
	    </span>
	    <span class="unknown-attr allow-derivation disabled">
	      <span class="tool-tip-info">You may create a derived data product from this feed.</span>
	    </span>
	    <span class="unknown-attr allow-redistribution disabled">
	      <span class="tool-tip-info">You may redistribute this feed.</span>
	    </span>
          </div>
	</td>
	-->
                <td class="" *ngIf="sessionService.loggedIn">
                    <input type="checkbox" (click)="actionOnFeed(feed.id)" [checked]="checkSubscribed(feed.id)">
                </td>
            </tr>
        </tbody>
    </table>

    <div class="pagination">
        <pagination-template #p="paginationApi" (pageChange)="page = $event" autoHide="true">
            <ul class="ng2-pagination custom" *ngIf="p.pages.length > 1">
                <li class="pagination-previous" [class.disabled]="p.isFirstPage()">
                    <a *ngIf="1 < p.getCurrent()" (click)="p.previous()">
                        <i class="fa fa-arrow-left"></i>
                    </a>
                    <span *ngIf="p.isFirstPage()">
                        <i class="fa fa-arrow-left"></i>
                    </span>
                </li>
                <li [class.current]="p.getCurrent() === page.value" *ngFor="let page of p.pages">
                    <a (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value">
                        <span>{{ page.label }}</span>
                    </a>
                    <div *ngIf="p.getCurrent() === page.value">
                        <span>{{ page.label }}</span>
                    </div>
                </li>
                <li class="pagination-next" [class.disabled]="p.isLastPage()">
                    <a *ngIf="!p.isLastPage()" (click)="p.next()">
                        <i class="fa fa-arrow-right"></i>
                    </a>
                    <span *ngIf="p.isLastPage()">
                        <i class="fa fa-arrow-right"></i>
                    </span>
                </li>
            </ul>
        </pagination-template>
    </div>
</div>
<!--/.dataset-table-->
